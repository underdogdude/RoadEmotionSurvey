<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Road Emotion Survey</title>

    <!-- Fav Icon -->
    <link rel="icon" type="image/png" href="./img/logo.png" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
    <!-- Vendor CSS -->
    <link rel="stylesheet" href="./css/vendor/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="./css/vendor/fontawesome-all.css">
    <!-- Page style -->
    <link rel="stylesheet" href="./css/style.css">
    <script defer src="./js/vendor/face-api.min.js"></script>
    <script defer src="./js/script2.js"></script>
</head>

<body>

    <div class="hidding__section">
        <video id="preview" width="160" height="120" autoplay muted></video>
        <video id="recording" width="160" height="120" controls></video>
        <a id="downloadButton" class="button">
            Download
        </a>
    </div>

    <div class="container-fluid">
        <div style="position: fixed; top: 10px; right: 10px; z-index: 99999;">
            <video onloadedmetadata="onPlay(this)" id="inputVideo" autoplay muted playsinline width="100"
                height="100"></video>
            <canvas id="overlay" style="position: absolute; left: 0;"></canvas>
        </div>
        <div class="card card__dark">
            <div class="card-body text-center">
                <!--  -->
                <h6 class="font-weight-bold text-warning">
                    Scenario 3
                </h6>

                <div class="vdo__section">
                   
                    <video id="myVideo" class="vdo__player" >
                        <source src="./img/vdo/FoundAccident.mp4" type="video/mp4">
                        Your browser does not support HTML5 video.
                    </video>

                    </br>

                    <button class="btn btn__play " onclick="playBtn()" id="playBtn">
                        <i class="fas fa-play-circle "></i>
                    </button>
                </div>

                <!-- <div class="survey__section mt-4">
                    <h3>
                        How do you feel about this VDO?
                    </h3>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="emotion" value="angry">
                        <label class="form-check-label">Angry</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="emotion" value="annoyed">
                        <label class="form-check-label">Annoyed</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="emotion" value="anxious">
                        <label class="form-check-label">Anxious</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="emotion" value="fear">
                        <label class="form-check-label">Fear</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="emotion" value="sad">
                        <label class="form-check-label">Sad</label>
                    </div>
                </div>
                <div class="survey__section mt-4">
                    <h3>
                        Please indicate you emotional states
                    </h3>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="1">
                        <label class="form-check-label">Do not feel at all</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="2">
                        <label class="form-check-label">Slightly Feel</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="3">
                        <label class="form-check-label">Somewhat</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="4">
                        <label class="form-check-label">Neutral</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="5">
                        <label class="form-check-label">Quite a bit</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="6">
                        <label class="form-check-label">Very much</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="likert" value="7">
                        <label class="form-check-label">Strongly Feel</label>
                    </div>
                </div> -->

                <button type="button" onclick="next('3','4')" class="btn btn-primary mt-5" style="width: 500px;"
                    id="nextBtn">
                    Next >>
                </button>
            </div>
        </div>
    </div>
</body>
<!-- Vendor JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
</script>
<script src="./js/vendor/bootstrap.min.js"></script>

<script>
    // get name
    var name = sessionStorage.getItem("name");
    console.log(name);
    $("#nextBtn").hide();
    // $("#playBtn").hide();

    // $("input:radio[name='emotion']").click(function () {
    //     var selected__value = $(this).val();
    //     $("#nextBtn").show();
    // });

    function playBtn() {
        play(name, '3');
    }

    var vid = document.getElementById("myVideo");
    let preview = document.getElementById("preview");
    let recording = document.getElementById("recording");
    let startButton = document.getElementById("startButton");
    let stopButton = document.getElementById("stopButton");
    let downloadButton = document.getElementById("downloadButton");


    vid.onplaying = function () {
        $("#playBtn").hide();
    };
    vid.onpause = function () {
        $("#playBtn").show();
    };

    function play(name, scenario_number) {
        vid.play();
    }
    document.getElementById('myVideo').addEventListener('ended', myHandler, false);
    function myHandler(e) {
        // What you want to do after the event
        var link = document.createElement("a");
        link.setAttribute("target", "_blank");
        if (Blob !== undefined) {
            var blob = new Blob([emotionString], {
                type: "text/plain"
            });
            link.setAttribute("href", URL.createObjectURL(blob));
        } else {
            link.setAttribute("href", "data:text/plain," + encodeURIComponent(text));
        }
        link.setAttribute("download", "situation3");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        $("#nextBtn").show();
    }
</script>
<script src="./js/record.js"></script>





</html>